"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f8ad440a-a757-513b-8fce-78785d168b14")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[2265],{503702:(e,t,i)=>{i.d(t,{W:()=>u});var n=i(7378),r=i(514228),a=i(288654),o=i(723791),s=i(880308),l=i(934707),d=i(43951);function u(e=!1){let t=(0,r.wA)(),i=n.useMemo(()=>(0,s.g)(),[]),c=(0,a.Rs)((0,d.gvX)({cacheNonce:i}));n.useEffect(()=>{if("loaded"!==c.status)return;let i=(0,o.oA)(c.data.currentUser.notificationExperimentInfo);i&&("exp_notification_catfile"===i.experimentName||"exp_notification_catfic"===i.experimentName)&&("prompt_to_opt_in"===i.type?t((e?l.hU:l.ZI)({userId:i.userId,fileKey:i.fileKey,experimentName:i.experimentName,toastType:"prompt_to_opt_in"})):t(l.EJ({userId:i.userId,fileKey:i.fileKey,preference:i.preference,experimentName:i.experimentName})))},[t,c,e])}},351942:(e,t,i)=>{i.d(t,{_:()=>c});var n=i(486106),r=i(7378),a=i(763686),o=i(714743),s=i(676397),l=i(731583),d=i(62612),u=i(733644);let c=r.memo(function(e){let{nodeId:t}=e,i=r.useRef(null),o=r.useRef(null),s=(0,d._X)({subscribeToUpdates_expensive:!0});return r.useEffect(()=>{let e=(0,l.EE)(`loading-embed-${t}`,[t],e=>{if(!e.position){a.glU.removeLoadingEmbed(t);return}o.current=e.position,f(i,s,o)}),n=e.currentNodePosition[t]?.position;return n?(o.current=n,f(i,s,o)):a.glU.removeLoadingEmbed(t),()=>{(0,l.lB)(`loading-embed-${t}`)}},[t,s]),(0,n.jsx)("div",{ref:i,children:(0,n.jsx)(m,{})})});function m(){return(0,n.jsx)("span",{className:"loading_embed_overlay--root--UKqJ8",children:(0,n.jsx)(o.B,{svg:u.A,className:"loading_embed_overlay--spinner--bw3Cv",autosize:!0})})}function f(e,t,i){if(!e.current||!t||!i.current)return;let n=e.current,r=i.current,a=(0,d.Yb)(t,r),o=28*t.zoomScale;n.style.transform=`translate(${a.x+(a.width-o)/2+t.x}px, ${a.y+(a.height*s.Ao/s.RN-o)/2+t.y}px) rotate(${r.angle}deg) scale(${t.zoomScale})`,n.style.transformOrigin="top left",n.style.position="absolute"}},443466:(e,t,i)=>{i.d(t,{Pm:()=>n,aF:()=>a});var n=(e=>(e.Light="LIGHT",e.Dark="DARK",e.Translucent="TRANSLUCENT",e))(n||{}),r=(e=>(e.Light="light",e.Dark="dark",e))(r||{});function a(e){let t,i;switch(e.theme){case void 0:case"LIGHT":t="LIGHT";break;case"DARK":case"TRANSLUCENT":t="DARK"}i="LIGHT"===t?"light":"dark";let n="true"===e.hideBackground;return n&&(i=function(e){switch(e){case"light":return"dark";case"dark":return"light"}}(i)),{theme:t,preferredTokenTheme:i,transparentMode:n}}},430710:(e,t,i)=>{i.d(t,{DR:()=>L,E$:()=>A,Wd:()=>M,gD:()=>B,lu:()=>F,wL:()=>k});var n=i(486106),r=i(7378),a=i(514228),o=i(632989),s=i(369764),l=i(763686),d=i(189185),u=i(871411),c=i(700578),m=i(601108),f=i(536384),p=i.n(f),E=i(632319),g=i(589278),y=i(303541),v=i(302958),h=i(576487),I=i(349969),_=i(505138),b=i(386952),x=i(372672),N=i(84367),P=i(537408),S=i(778443),w=i(762998),T=i(708171),R=i(277411),O=i(216695),D=i(503596);function L(e){let{nodeId:t,setConfigData:i,isReadOnly:o,invalidateThumbnail:s}=e,{isEmbedActive:u,setActiveEmbed:f}=(0,T._)(t),p=!o,E=(0,a.wA)(),g=(0,N.ut)(l.Ez5?.flappData().embeddablePrototypeIdPendingInsertion,""),[_,b]=(0,r.useState)(),x=(0,r.useMemo)(()=>{let t=B(e.configData);if(!t)return;let i=I.hY[t.presetIdentifier],n=t.rotation===l.xOL.CCW_90,{x:r,y:a}=i?.imageSize??{x:0,y:0},[o,s]=n?[a,r]:[r,a];return o/s},[e.configData]);(0,r.useEffect)(()=>{if(!p)return;let e=(0,c.UN)().get(t),i=x??_;e&&i&&d.l7.system("resizing-embed",()=>{let t=e.size.x>0?e.size.x:400,n=Math.floor(t/i);0===e.size.x&&(e.x-=t/2,e.y-=n/2),e.resizeWithConstraints(t,n),e.proportionsConstrained=!0})},[t,x,_,p]),(0,r.useEffect)(()=>{t===g&&(E(v.F.enqueue({type:"slides-embedded-prototype",message:(0,y.t)("slides.inserting_embed.visual_bell"),icon:h.zX.SPINNER,timeoutOverride:1/0})),f(),setTimeout(()=>{t===l.Ez5?.flappData().embeddablePrototypeIdPendingInsertion.getCopy()&&l.oHM?.embeddablePrototypeLoadFailed()},3e4))},[t,g,E,f]),(0,r.useEffect)(()=>{let e=e=>{if(e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==S.xu+t)return;let n=e.data;if("EMBED_PROTO_ASPECT_RATIO"===n.type&&n.data.aspectRatio&&(b(n.data.aspectRatio),t===g&&l.oHM?.embeddablePrototypeLoadSucceeded()),"EMBED_PROTO_DEVICE"===n.type){let e=n.data.device;p&&e?d.l7.system("set-embed-device-frame-config-data",()=>{i("deviceFrameShown",""!==e.presetIdentifier&&"PRESET"===e.type?"true":"false"),i("deviceFramePreset",e.presetIdentifier),i("deviceFrameRotation",e.rotation)}):p&&d.l7.system("set-embed-device-frame-config-data",()=>{i("deviceFrameShown","false"),i("deviceFramePreset",""),i("deviceFrameRotation","NONE")})}if("EMBED_PROTO_FILE_METADATA"===n.type&&p&&d.l7.system("embed-file-metatada",()=>{i("fileName",n.data.fileName),i("pageName",n.data.pageName),n.data.activeStartingPointNodeId&&i("activeStartingPointNodeId",n.data.activeStartingPointNodeId),n.data.startingPointsData&&i("startingPointsData",JSON.stringify(n.data.startingPointsData))}),"EMBED_PROTO_THUMBNAIL"===n.type&&n.data.thumbnail){if(!(0,m.k)().slides_iframe_embedded_prototypes_thumbnail)return;(0,S.yx)(n.data.thumbnail,n.data.width,n.data.height,t,s)}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t,i,E,g,p,s]);let P=(0,T.s)(t)||!u;return(0,n.jsx)(C,{...e,isActive:u,setActive:f,disablePointerEvents:!P})}function A(e){let t=(0,b.mr)(),i=(0,E.hk)(),a=e.nodeId,[o,s]=(0,r.useState)(i?.isActiveSlidesEmbeddedPrototype(a)||!1);(0,E.O5)(i,"embeddedPrototypeDataChange",r.useCallback(e=>{let t=!1;for(let i of e)if(u.dI(i.nodeId)===a){t=!0;break}s(t)},[a]));let l=(0,r.useCallback)(e=>{t.isAudienceViewPopout?(0,R.oR)({type:"LOAD_EMBEDDED_PROTOTYPE",nodeId:e}):i?.setActiveSlidesEmbeddedPrototype(e)},[i,t]);return(0,n.jsx)(C,{...e,isActive:o,setActive:l})}function C({configData:e,nodeId:t,setConfigData:i,isViewer:a,isActive:o,setActive:s,disablePointerEvents:l,invalidateThumbnail:d}){let c=(0,E.hk)(),m=B(e),f=r.useCallback(e=>{for(let i of e)if(u.dI(i.nodeId)===t){let e=z(t);if(e&&!c?.isPresenterSession()){e.contentWindow?.postMessage({type:"SET_OBSERVING_SESSION_ID",data:{sessionId:null!=i.sessionId?i.sessionId:-1}},"*");break}}},[t,c]);(0,E.O5)(c,"embeddedPrototypeDataChange",f);let p=r.useCallback(e=>{let i=z(t);i?.contentWindow?.postMessage({type:"PROTOTYPE_EMBED_SELECT_FLOW",data:{flowId:e}},"*")},[t]);return(0,r.useEffect)(()=>{e.activeStartingPointNodeId&&p(e.activeStartingPointNodeId)},[e.activeStartingPointNodeId,p]),(0,r.useEffect)(()=>{let e=e=>{e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==S.xu+t||!c||"EMBEDDED_PROTOTYPE_SESSION_ID"!==e.data.type||c.setEmbeddedPrototypeSession(t,e.data.data.sessionId)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[c,t,i,a]),(0,n.jsx)(k,{deviceFrame:m,invalidateThumbnail:d,children:(0,n.jsxs)("div",{className:g.s.hFull.wFull.$,style:{pointerEvents:l?"none":"auto"},children:[o&&e.url?(0,n.jsx)(j,{baseUrl:e.url,nodeId:t,activeStartingNodeId:e.activeStartingPointNodeId}):null,!o&&s?(0,n.jsx)(F,{isViewer:a,nodeId:t,onClick:()=>s(t)}):null]})})}let F=r.memo(({isViewer:e,nodeId:t,onClick:i})=>{let[a,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=!0,i=null;return(async()=>{try{let n=(0,c.UN)().get(t);if(!n||!n.fills||0===n.fills.length)return;let r=n.fills.find(e=>"IMAGE"===e.type&&e.image?.hash);if(!r||!r.image?.hash)return;let a=await (0,P.I)(r);if(!a||!e)return;let o=new Blob([a],{type:"image/png"});i=URL.createObjectURL(o),e&&l(i)}catch(e){console.error("Failed to load thumbnail for embed overlay:",e)}})(),()=>{e=!1,i&&URL.revokeObjectURL(i)}},[t]);let d=(0,m.k)().slides_iframe_embedded_prototypes_thumbnail?D.kg:D.zP,u=a&&(0,m.k)().slides_iframe_embedded_prototypes_thumbnail?{backgroundImage:`url(${a})`}:{};return e?(0,n.jsx)(o.E,{className:p()(d,g.s.cursorPointer.$),style:u,onClick:i,children:(0,n.jsx)(s.l,{className:D.uZ})}):(0,n.jsx)("div",{className:d,style:u,children:(0,n.jsx)(s.l,{className:p()(D.uZ,g.s.cursorPointer.$),onClick:i})})});function k({deviceFrame:e,children:t,invalidateThumbnail:i}){let r=e?.rotation===l.xOL.CCW_90?{x:e?.size.y??$.size.y,y:e?.size.x??$.size.x}:{x:e?.size.x??$.size.x,y:e?.size.y??$.size.y};return(0,n.jsx)("div",{className:D.kL,children:(0,n.jsx)(w._,{initialViewerSize:r,isDeviceFrameShown:null!=e&&e.type===l.XQq.PRESET&&""!==e.presetIdentifier,prototypeDevice:e,isInlinePreview:!1,onDeviceFrameLoaded:i,children:t})})}function j({baseUrl:e,nodeId:t,activeStartingNodeId:i}){let[a,o]=(0,r.useState)(i),s=function(e,t,i){let n;if(!e)return null;try{n=new URL(e)}catch(e){return null}let r=n.searchParams;return(0,O.e)(r,"bare-ui","1"),(0,O.e)(r,"scaling","fit-width"),(0,O.e)(r,"content-scaling","fixed"),(0,O.e)(r,"needsAlpha","1"),(0,O.e)(r,"inline-viewer","1"),(0,O.e)(r,"disable-default-keyboard-nav","1"),t&&(0,O.e)(r,"fuid",t),i&&(0,O.e)(r,"starting-point-node-id",i),n}(e,(0,x.TA)(),a);return(0,n.jsx)("div",{className:D.pU,children:(0,n.jsx)("iframe",{id:`${S.xu}${t}`,className:D.pU,loading:"eager",src:s?.toString(),title:(0,y.t)("slides.flapp.embed.title"),allow:"autoplay; encrypted-media; picture-in-picture; fullscreen;",sandbox:"allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation",referrerPolicy:"same-origin"})})}function z(e){return document.getElementById(S.xu+e)}let U=e=>{switch(e){case"NONE":default:return l.xOL.NONE;case"CCW_90":return l.xOL.CCW_90}};function M(e){return!!e.deviceFramePreset&&(void 0===e.deviceFrameShownOverride?"true"===e.deviceFrameShown:"true"===e.deviceFrameShownOverride)}function B(e){return M(e)?function(e){let t=I.hY[e.deviceFramePreset??""];return t?{type:l.XQq.PRESET,size:t.framePresetSize,presetIdentifier:t.presetIdentifier,rotation:U(e.deviceFrameRotation)}:null}(e):null}let V=_.eo[0],$={type:l.XQq.PRESET,size:V?.framePresetSize??{x:0,y:0},presetIdentifier:V?.presetIdentifier??"",rotation:l.xOL.NONE}},797777:(e,t,i)=>{i.d(t,{u:()=>L});var n=i(486106),r=i(7378),a=i(944059),o=i(934246),s=i(718764),l=i(763686),d=i(189185),u=i(700578),c=i(601108),m=i(19536),f=i(536384),p=i.n(f),E=i(674128),g=i.n(E),y=i(850789),v=i(449184);function h(e){let t=document.activeElement;if(!t)return!1;let i=e&&"current"in e?e.current:e;return!!i&&(i===t||i.contains(t))}var I=i(8833),_=i(624361),b=i(731583),x=i(186343),N=i(62612),P=i(722362),S=i(516028),w=i(84367),T=i(632248),R=i(862289),O=i(653234),D=i(846751);function L(){let e=(0,N._X)({subscribeToUpdates_expensive:!0}),t=(0,P.p8)("isReadOnly"),i=(0,P.p8)("topLevelMode")===l.lyf.HISTORY,r=(0,m.k9)(()=>e,[e]),o=document.getElementById("fullscreen-root");if(!o)return null;let s=o.querySelectorAll(".view.container-view");if(0===s.length)return null;let d=s[s.length-1];return d?(0,a.createPortal)((0,n.jsx)(A,{viewportInfo:r,isReadOnly:t||i}),d):null}function A({viewportInfo:e,shouldRenderMobileFlapps:t,isReadOnly:i}){let a=(0,r.useCallback)((e,t)=>{let i=(0,u.UN)().get(e.nodeId),n=i?.containingSlideId,r=i?.containingCanvas;if(i&&e.position&&n)return{guid:e.nodeId,slideId:n,pageId:r,position:t,type:i.interactiveSlideElementType}},[]),o=(0,w.ut)(l.Ez5?.flappData().nodeIds,[]),s=(0,b.tB)("Flapps",o,a,{useFlushSyncExpensive:!0}),d=(0,w.ut)(l.Ez5?.singleSlideView().focusedNodeId,""),c=l.Ez5?.singleSlideView().isFocusedNodeViewFocused()??!1,f=(0,x.dh)(),p=(0,m.k9)(()=>Object.values(s).filter(e=>e.pageId===f&&(!c||c&&e.slideId===d)),[s,c,d,f]);return(0,R.wj)(T.JT.BOARD_TO_DECK).state===R.qy.RUNNING?null:(0,n.jsx)(n.Fragment,{children:p.map(r=>(0,n.jsx)(C,{element:r,viewportInfo:e,shouldRenderMobileFlapp:t,isReadOnly:i},r.guid))})}let C=r.memo(({element:e,viewportInfo:t,shouldRenderMobileFlapp:i,isReadOnly:a})=>{let o=(0,r.useRef)(null),d=function(e){let[t,i]=(0,r.useState)(()=>h(e));return r.useEffect(()=>{let t=()=>{i(h(e))};return document.addEventListener("focusin",t),document.addEventListener("focusout",t),t(),()=>{document.removeEventListener("focusin",t),document.removeEventListener("focusout",t)}},[e]),t}(o),m=(0,w.ut)(l.Ez5?.flappData().nodeThumbnailEditCount,new Map).get(e.guid)??0,[f,E]=(0,r.useState)(0),g=(0,r.useCallback)(()=>E(e=>e+1),[]),[y,v]=(0,r.useState)(null);if(!e||!e.position||!t)return(0,n.jsx)(n.Fragment,{});let _=(0,u.UN)().get(e.guid);if(!_)return null;let b=(0,N.Yb)(t,e.position),x="ALIGNMENT"===e.type||"POLL"===e.type||"FACEPILE"===e.type||"EMBED"===e.type&&!(0,c.k)().slides_iframe_embedded_prototypes_thumbnail;return(0,n.jsx)(s.i,{children:(0,n.jsxs)("div",{ref:o,className:p()({[I.Qx]:d}),"data-testid":`flapp-${e.guid}`,title:_.name,style:{position:"fixed",width:e.position.width,height:e.position.height,top:t.y,left:t.x,transform:`translate(${b.x}px, ${b.y}px) rotate(${e.position.angle}deg) scale(${t.zoomScale})`,transformOrigin:"top left",pointerEvents:a?"none":"auto"},children:[(0,n.jsx)("div",{className:D.U,ref:v,children:(0,n.jsx)(F,{element:e,shouldRenderMobileFlapp:i,isReadOnly:a,invalidateThumbnail:g})}),y&&x&&(0,n.jsx)(k,{nodeId:e.guid,editCount:m,flappDomElement:y,isReadOnly:a,manualThumbnailInvalidationCount:f})]})})});function F({element:e,shouldRenderMobileFlapp:t,isReadOnly:i,invalidateThumbnail:r}){if(null===e.type)return null;let{EditorFlapp:a}=t?(0,O.v)(e.type):(0,O.Z)(e.type);return(0,n.jsx)(a,{nodeId:e.guid,isReadOnly:i,invalidateThumbnail:r})}function k({nodeId:e,editCount:t,manualThumbnailInvalidationCount:i,flappDomElement:a,isReadOnly:s}){let[l]=(0,y.A)(t,500),[c]=(0,y.A)(i,500),m=(0,S.tS)();return r.useEffect(()=>{var t;if(s)return;let i=(0,u.UN)().get(e);if(!i||"INTERACTIVE_SLIDE_ELEMENT"!==i.type)return;let n=o.lQ;return t=()=>{n=function(e,t,i){let n=t.interactiveSlideElementType,r=t.guid,a=!1;return g().toBlob(e,{bgcolor:"transparent"}).then(e=>e?.arrayBuffer()).then(e=>{if(!e||0===e.byteLength)throw Error("Cannot decode empty buffer");return(0,_.UD)(new Uint8Array(e),"image/png",`${r}thumbnail`)}).then(e=>{t.isAlive&&!a&&d.l7.system("generate-slide-thumbnail",()=>{0===t.fills.length?t.insertImageInFillPaint(e):t.setImageInFillPaint(e)})}).catch(e=>{(0,v.sx)("Failed to generate thumbnail in editor for slide",{error:e,nodeId:r,flappType:n,fileKey:i},{forwardToDatadog:!0})}),()=>{a=!0}}(a,i,m??"")},requestAnimationFrame(()=>requestAnimationFrame(t)),n},[s,e,l,c,a,m]),(0,n.jsx)(n.Fragment,{})}},277411:(e,t,i)=>{i.d(t,{oR:()=>r}),i(7378),i(601108),i(27355);var n=i(270963);function r(e){if(!window.opener){console.error("No parent window found! Did you open this window manually?");return}n.L?.addAction("postMessageToPresenterView",{type:e.type}),window.opener.postMessage(e,"*")}i(257275),i(632319),i(73682);var a=(e=>(e[e.LOADING=1]="LOADING",e[e.PRESENTER_VIEW_CAN_DRIVE=2]="PRESENTER_VIEW_CAN_DRIVE",e[e.POPOUT_VIEWER_CAN_DRIVE=3]="POPOUT_VIEWER_CAN_DRIVE",e[e.PRESENTER_VIEW_SPOTLIGHT=4]="PRESENTER_VIEW_SPOTLIGHT",e))(a||{})}}]);

//# debugId=f8ad440a-a757-513b-8fce-78785d168b14

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/8cc8e4d17ade6e77bb62a014020514470e143d5b/2265-b6a60d95d8c8f533.min.js.map