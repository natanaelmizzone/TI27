"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="29a91245-2eed-5878-8a89-56ff47df5e66")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[6503],{166178:(e,t,n)=>{n.d(t,{$S:()=>s,D5:()=>d,HL:()=>o,KD:()=>i,Qi:()=>a});let o="feed_reactions_section--reactionPill--qE8nJ reactions--reaction--BGfYE text--fontPos11--2LvXf text--_fontBase--QdLsd",i="feed_reactions_section--reactionList---Yu5e",s="feed_reactions_section--addReactionButton--0D-O4",a="feed_reactions_section--addReactionButtonSelected--OU1gq",d="feed_reactions_section--addReactionButtonOnly--9t-4W"},183814:(e,t,n)=>{n.d(t,{g:()=>i});var o=n(7378);function i(e,t,n){(0,o.useLayoutEffect)(()=>{if(!e||!e.current)return;let o=new IntersectionObserver(n=>{for(let o of n)e.current===o.target&&t?.(o)},n);return o.observe(e.current),()=>o.disconnect()},[e,t,n])}},430062:(e,t,n)=>{n.d(t,{Ig:()=>s,Pp:()=>l,XL:()=>c,nH:()=>i,pu:()=>o,td:()=>d,ug:()=>a,zH:()=>r});var o=(e=>(e.NAME_SELF="Name Step",e.HOW_DO_YOU_PLAN_TO_USE_FIGMA="How do you plan to use Figma Step",e.WHAT_DO_YOU_DO="What Do You Do Step",e.WHAT_DO_YOU_DO_V2="What Do You Do Role Step",e.WHERE_OR_HOW_DO_YOU_WORK="Where Or How Do You Work Step",e.WHAT_TYPE_OR_LEVEL_OF_SCHOOL="What Type Or Level Of School Step",e.HOW_MANY_PEOPLE_WORK_IN_ORGANIZATION="How Many People Work At Your Organization Step",e.INVITE_COLLABORATORS="Invite Collaborators Step",e.HAVE_USED_WHITEBOARDS_BEFORE="Have You Used Digital Whiteboarding Tools Before Step",e.HAVE_USED_FIGMA_PRODUCTS_BEFORE="Have You Used Figma Products Before Step",e.CHOOSE_PLAN="Choose Plan Step",e.CHOOSE_PRODUCT="Choose Product Step",e.WHICH_SEAT_WOULD_YOU_LIKE="Which Seat Would You Like Step",e))(o||{});let i=["Name Step","How do you plan to use Figma Step","What Do You Do Role Step","Invite Collaborators Step","Have You Used Figma Products Before Step","Choose Plan Step","Choose Product Step"],s=["Name Step","How do you plan to use Figma Step","What Do You Do Role Step","Invite Collaborators Step","Have You Used Digital Whiteboarding Tools Before Step","Choose Plan Step"],a=["Name Step","How do you plan to use Figma Step","What Do You Do Role Step"],d=i.filter(e=>"Choose Product Step"!==e),r=i.filter(e=>"Choose Plan Step"!==e),l=["Name Step","What Do You Do Role Step","Have You Used Figma Products Before Step"],c=["What Do You Do Step"]},476940:(e,t,n)=>{n.d(t,{ue:()=>w});var o=n(486106),i=n(7378),s=n(821217),a=n(207101),d=n(169182),r=n(303541),l=n(370443),c=n(621515),u=n(268271),m=n(129046),p=n(425180),f=n(11928),_=n(748636),h=n(811033),g=n(415545),v=n(6204),x=n(347702),C=n(807385);let b=(0,x.n)(()=>u.N.SECONDARY_MODAL),T=(0,x.n)(()=>h.d.isBrowserNotificationSupported()),I=(0,x.n)(()=>h.d.isFirebaseInitialized());function w({registrationOrigin:e,fixedPositionProps:t}){let{complete:n,isShowing:u,show:x}=(0,c.e)({overlay:v.ueY,priority:b()});(0,a.h)(()=>{(async()=>{let e=await h.d.getPermissionPreference(),t=I()&&T()&&"prompt"===e.state;x({canShow:()=>t})})()}),i.useEffect(()=>{t?.setIsShowingOverlay?.(u)},[u,t]);let w=()=>{h.d.requestPushNotifications(e)},{calloutTitle:P,mediaPath:j,targetKey:O,arrowPosition:y}=function(e){let t,n,o,i;switch(e){case g.iX.NEW_COMMENT:t=(0,r.tx)("browser_notifications.onboarding_overlay.title.replies"),n=C.qH,o=C.UU,i=_.F_.BOTTOM;break;case g.iX.COMMENT_REPLY:t=(0,r.tx)("browser_notifications.onboarding_overlay.title.replies"),n=C.qH,o=C.ym,i=_.F_.TOP_RIGHT;break;default:t=(0,r.tx)("browser_notifications.onboarding_overlay.title.activity"),n=C.vH,o=C.fD,i=_.F_.TOP_RIGHT}return{calloutTitle:t,mediaPath:n,targetKey:o,arrowPosition:i}}(e),E={clickOutsideToHide:!0,description:(0,r.tx)("browser_notifications.onboarding_overlay.description"),disableHighlight:!0,isShowing:u,media:(0,o.jsx)(m.y,{alt:(0,r.t)("browser_notifications.onboarding_overlay.media.alt"),aspectRatio:C.mk,src:(0,d.ck)(j)}),onClose:n,primaryCta:{ctaTrackingDescriptor:l.c.NEXT,label:(0,r.tx)("browser_notifications.onboarding_overlay.primary_cta"),onClick:()=>{w(),n()},type:"button"},secondaryCta:{ctaTrackingDescriptor:l.c.CLOSE,label:(0,r.tx)("browser_notifications.onboarding_overlay.secondary_cta"),onClick:n,type:"button"},shouldHideArrow:!0,title:P,trackingContextName:"Browser Notifications Onboarding",width:C.V_,zIndex:f.R.MODAL};return(0,o.jsx)(s.o,{eventListeners:["onClick","onMouseDown"],children:t?.targetLocation?(0,o.jsx)(p.rq,{...E,fixedPosition:!0,location:t.targetLocation,innerRef:t.innerRef}):(0,o.jsx)(p.rq,{...E,arrowPosition:y,targetKey:O,zIndex:e===g.iX.NOTIFICATION_BELL?f.R.NOTIFICATION_MODAL:void 0})})}},903447:(e,t,n)=>{n.d(t,{V:()=>u});var o=n(486106),i=n(7378),s=n(303541),a=n(672640),d=n(848862),r=n(129884),l=n(504727),c=n(778125);function u(e){let t=(0,d.BK)(e.dropdownId),n=i.useRef(null),u=i.useRef(null);if(i.useEffect(()=>{t.showing&&u.current&&u.current.focus()},[t.showing]),e.hideTarget&&!t.showing)return null;let m=e.children;return m||(m=(0,o.jsx)(c.YW,{style:t.showing?{backgroundColor:"var(--color-bg-hover, var(--fallback-color-bg-hover))"}:void 0,selected:t.showing,"data-tooltip-type":r.Ib.TEXT,"data-tooltip":(0,s.t)("fig_feed.more_actions"),onClick:e=>{e.stopPropagation(),t.toggle()},children:(0,o.jsx)(a.In,{icon:"dots-32"})})),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{ref:n,onMouseDown:e=>e.stopPropagation(),children:m}),n.current&&t.showing&&(0,o.jsx)(l.Jz,{closeDropdown:t.hide,displayAboveTarget:e.displayAboveTarget,displayOverTarget:e.displayOverTarget,hideDropdown:t.hide,lean:e.lean,maxHeight:e.maxHeight,maxWidth:e.maxWidth,minWidth:e.minWidth,options:e.options,propagateCloseClick:!0,showPoint:!1,targetRect:n.current.getBoundingClientRect(),textAlign:e.textAlign})]})}},837002:(e,t,n)=>{n.d(t,{x:()=>ea});var o=n(486106),i=n(7378),s=n(465776),a=n(536384),d=n.n(a),r=n(853977),l=n(191804),c=n(749682),u=n(60079),m=n(211326),p=n(714743),f=n(303541),_=n(355181),h=n(966582),g=n(530837),v=n(129884),x=n(462076),C=n(561236);function b(){return(0,o.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",children:[(0,o.jsx)("path",{d:"M1 9C1 4.58172 4.58172 1 9 1C13.4183 1 17 4.58172 17 9C17 13.4183 13.4183 17 9 17C4.58172 17 1 13.4183 1 9Z",fill:"var(--color-icon)"}),(0,o.jsx)("path",{d:"M9 16.25C4.99594 16.25 1.75 13.0041 1.75 9H0.25C0.25 13.8325 4.16751 17.75 9 17.75V16.25ZM16.25 9C16.25 13.0041 13.0041 16.25 9 16.25V17.75C13.8325 17.75 17.75 13.8325 17.75 9H16.25ZM9 1.75C13.0041 1.75 16.25 4.99594 16.25 9H17.75C17.75 4.16751 13.8325 0.25 9 0.25V1.75ZM9 0.25C4.16751 0.25 0.25 4.16751 0.25 9H1.75C1.75 4.99594 4.99594 1.75 9 1.75V0.25Z",fill:"var(--color-icon-oninverse)"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.1554 8.44833L11.6037 6L12.3108 6.7071L9.86251 9.15544L12.3108 11.6038L11.6037 12.3109L9.15541 9.86255L6.70711 12.3109L6 11.6038L8.4483 9.15544L6 6.70715L6.70711 6.00004L9.1554 8.44833Z",fill:"var(--color-icon-oninverse)"})]})}var T=n(508893),I=n(858013),w=n(831696);function P(e){let[t,n]=i.useState(),[s,a]=i.useState(!0);return i.useEffect(()=>{let t=(0,w.lD)({hideUI:!0,disableDefaultKeyboardNav:!1,showProtoSidebar:!1,scalingInfo:{viewportScalingMode:"contain"},showHotspots:!0,inlinePreview:!1,startingPointNodeId:e.item.startingNodeId,nodeId:e.item.startingNodeId}),o=(0,x.OQ)(e.item,t);n(`${location.origin}/embed?embed_host=feed&url=${encodeURIComponent(o)}`)},[e.item]),(0,o.jsxs)("div",{style:{width:"100%",height:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"black"},children:[s&&(0,o.jsx)(I.kt,{}),t?(0,o.jsx)("iframe",{title:"Prototype Viewer",style:s?{width:0,height:0}:{width:"100%",height:"100%"},src:t,onLoad:()=>a(!1)}):null]})}var j=n(934246),O=n(27355),y=n(39751),E=n(284552),S=n(183814),U=n(871455);let N=e=>e.preventDefault(),k=(0,O.eU)(null),M=(0,O.eU)(new Map),L=(0,O.eU)(null,(e,t,n)=>{t(M,new Map(e(M).set(n.id,n.snapshot)))}),A=(0,O.eU)(new Set),D=(0,O.eU)(e=>{let t=e(A);return 0===t.size?null:Array.from(t).pop()??null}),R=(0,O.eU)(null);function H(e){let t=i.useRef(null),[n,s,a]=(0,c.M)(),r=i.useRef(null),l=i.useRef(!1),u=i.useRef(!1),m=i.useRef(!1),[f,_]=(0,O.fp)(k),[g,v]=i.useState(),C=(0,O.fp)(M)[0],b=(0,O.fp)(L)[1],[T,I]=(0,O.fp)(A),w=(0,O.md)(D),[P,H]=(0,O.fp)(R),F=f?.id===e.id,W=e.source===x.Zp.TILE&&!e.isThumbnail,V=W&&(null==f||f.isPreviewing),z=!e.isThumbnail&&s,Z=W||e.isThumbnail,Y=u.current,{feedPostUuid:G}=e,Q=h.cU.includes(e.videoContent.mediaType)&&!!G,X=i.useMemo(()=>Q?`/api/feed_posts/${G}/videos/${e.videoContent.videoFileUuid}/manifest`:e.videoContent.path,[Q,G,e.videoContent]),K=(0,y.ZC)(f),$=(0,y.ZC)(e.videoContent.path),q=i.useCallback((t,n=!1)=>{e.isThumbnail||b({id:e.id,snapshot:{currentTime:n?0:t.currentTime,ended:t.ended,paused:t.paused}})},[b,e.id,e.isThumbnail]),J=i.useCallback(()=>{u.current=!0;let e=t.current;e&&(e.muted=!0,e.play().catch(j.lQ))},[]),ee=i.useCallback(()=>{let e=t.current;e&&e.pause()},[]),et=i.useCallback(()=>{_({id:e.id,ref:t,feedPostUuid:e.feedPostUuid,src:e.videoContent.path,source:e.source,isPreviewing:u.current})},[_,e.id,e.feedPostUuid,e.videoContent.path,e.source,u]),en=i.useCallback(()=>{if(!f)return;let n=t.current;if(n){if(!F){let t=f.feedPostUuid===e.feedPostUuid&&f.src===e.videoContent.path;if(e.source===x.Zp.DETAIL_MODAL&&f.source===x.Zp.TILE&&t){if(n){if(f.ref?.current){let e=f.ref.current;n.currentTime=e.ended?0:e.currentTime,e.paused?et():n.play()}else{let e=B(f.feedPostUuid,f.src,x.Zp.TILE),t=C.get(e);t&&(n.currentTime=t.ended?0:t.currentTime),et()}}}else if(e.source===x.Zp.TILE&&f.source===x.Zp.DETAIL_MODAL&&t){if(n&&!f.ref?.current){let e=B(f.feedPostUuid,f.src,x.Zp.DETAIL_MODAL),t=C.get(e);t&&(n.currentTime=t.currentTime||0),et()}else n.pause()}else if(n.paused){let t=C.get(e.id);t&&(n.currentTime=t.ended?0:t.currentTime)}else n.pause()}if(F&&C.has(e.id)&&!f.ref?.current){let n=C.get(e.id);if(t.current){if(t.current.currentTime=n.ended?0:n.currentTime,n.paused)return;t.current.play()}}}},[f,e.id,e.source,C,et,e.feedPostUuid,e.videoContent.path,F]),eo=i.useCallback(()=>{let n=t.current;n&&e.source===x.Zp.DETAIL_MODAL&&!e.isThumbnail&&n.play().catch(()=>{n.muted=!0,n.play()})},[e.isThumbnail,e.source]),ei=i.useCallback(t=>{let n=T.has(e.id);V&&t.isIntersecting&&!u.current&&!n?(J(),null!=e.feedPostIdx&&(null===P||P>e.feedPostIdx)&&H(t=>null!=e.feedPostIdx&&(null===t||t>e.feedPostIdx)?e.feedPostIdx:t),I(t=>{let n=new Set(t);return n.add(e.id),n})):!t.isIntersecting&&n&&(ee(),I(t=>{let n=new Set(t);return n.delete(e.id),n}),F&&_(null))},[J,ee,e.id,e.feedPostIdx,I,V,T,F,_,P,H]);(0,S.g)(a,ei,{threshold:.9}),i.useEffect(()=>{V&&w===e.id&&J()},[w,J,e.id,V]),i.useEffect(()=>{let n=t.current;if(!n)return;let o=()=>{et(),q(n)},i=()=>{if(u.current)u.current=!1,n.currentTime=0;else{let e=t.current;e&&q(e)}},s=()=>{let e=t.current;if(e){let t=e.duration-e.currentTime;t!==g&&v(t)}},a=()=>{s()},d=()=>{!m.current&&(m.current=!0,Z&&t.current&&(t.current.muted=!0),V&&P===e.feedPostIdx&&J())};return n.addEventListener("play",o),n.addEventListener("pause",i),n.addEventListener("timeupdate",s),n.addEventListener("loadedmetadata",a),n.addEventListener("canplay",d),()=>{n.removeEventListener("play",o),n.removeEventListener("pause",i),n.removeEventListener("timeupdate",s),n.removeEventListener("loadedmetadata",a),n.removeEventListener("canplay",d)}},[et,q,J,ee,u,g,Z,V,P,e.id,e.feedPostIdx]),i.useEffect(()=>{let n=t.current;if(n)return()=>{q(n,e.source===x.Zp.TILE)}},[q,e.source]),i.useEffect(()=>{l.current||(l.current=!0,async function(){window.VIDEOJS_NO_DYNAMIC_STYLE=!0;let n=await (0,E.Fe)();if(r.current)return;let o=t.current;e.isThumbnail?o.style.objectFit="cover":(o.style.maxHeight="100%",o.style.maxWidth="100%"),o.style.height="100%",o.style.width="100%",o.style.display="flex",o.style.justifyContent="center",o.style.alignItems="center",r.current=n.videoJs(o,{muted:!1,controls:!1,controlBar:!1,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,textTrackSettings:!1,textTrackDisplay:!1,nativeTextTracks:!1},()=>{e.isThumbnail||e.source===x.Zp.TILE||o.setAttribute("controls","true"),e.source===x.Zp.TILE&&o.classList.add("feed_video_player--hideFullscreenControl--C1EYT"),(0,E.uz)(X,Q,r.current).then(()=>{en()})})}())},[e.isThumbnail,e.videoContent,e.source,Q,X,en]),i.useEffect(()=>{r.current&&$!==e.videoContent.path&&(0,E.uz)(X,Q,r.current).then(()=>{en(),et()})},[en,e.videoContent,Q,X,$,et]),i.useEffect(()=>{if(r.current&&K&&f){if("detail"===f.source&&!f.ref?.current){en();return}K.id!==f.id&&en()}},[en,K,f]);let es=i.useCallback(()=>{if(e.isThumbnail||e.source!==x.Zp.TILE||!t.current||void 0===g||isNaN(g))return null;let n=new Date(1e3*g);return!n||isNaN(n.getTime())?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"feed_video_player--mediaBadgeV2--fvyMQ feed_post_content--mediaBadgeV2--7Akie feed_tile--feedPostHoverContainer--238j6",children:n.toLocaleString("en",{minute:"2-digit",second:"2-digit"})}),t.current.muted&&(0,o.jsx)(p.B,{svg:U.A,className:"feed_video_player--mutedBadge--K8Mfa"})]})},[e.isThumbnail,e.source,g]);return(0,o.jsxs)("div",{ref:n,className:d()("feed_video_player--videoContainer--L740O",e.isThumbnail&&"feed_video_player--videoContainerThumbnail--p1UBT"),children:[(0,o.jsx)("video",{ref:t,style:{backgroundColor:"#000000"},onCanPlay:eo,onClick:e.source!==x.Zp.DETAIL_MODAL?N:void 0,controls:z,loop:Y}),(!s||!z)&&es()]})}function B(e,t,n){return[e,t,n].join(":")}let F="feed_post_content--mediaBadgeV2--7Akie feed_tile--feedPostHoverContainer--238j6",W="feed_post_content--contentThumbnailsSectionInnerV2--26v-c",V="feed_post_content--contentThumbnailsSectionInnerV2_vertical--ysuGr",z="feed_post_content--contentThumbnailV2--o2ggD",Z="feed_post_content--smallThumbnail--0trZ9",Y="feed_post_content--wideThumbnail--FPYj1";var G=n(954184),Q=n(342635);function X(e){let t;switch(e.type){case g.cM.NODE:t=e.nodeId;break;case g.cM.IMAGE:t=e.url;break;case g.cM.VIDEO:t=e.path;break;case g.cM.PROTOTYPE:t=e.startingNodeId;break;default:throw Error("unexpected content item type")}return`${e.type}:${t}`}function K(e){let[t,n]=i.useState(!e.isThumbnail&&!e.usesPreviewImage);if(i.useEffect(()=>{if(!e.imgUrl)return;let t=new Image;t.src=e.imgUrl,t.onload=()=>{let e=t.width/t.height;n(t=>t&&Math.abs(e-T.dp)>.01)}},[e.imgUrl]),null===e.imgUrl)return(0,o.jsx)("div",{children:(0,f.t)("fig_feed.could_not_load_preview_image")});let s=e.isThumbnail&&e.thumbnailUrl?e.thumbnailUrl:e.imgUrl;return(0,o.jsxs)(o.Fragment,{children:[e.showPreviewFacade&&(0,o.jsx)("div",{className:"feed_post_content--previewFacadeOverlay--EXG86 feed_post_content--thumbnailOverlay--feEzZ",children:(0,o.jsx)(u.pz,{onClick:e.onUpdatePreviewImage,children:(0,f.t)("fig_feed.update_preview_image")})}),(0,o.jsx)("img",{src:s,alt:(0,f.t)("fig_feed.thumbnail_alt_text"),draggable:!1,className:d()("feed_post_content--itemImage--pGodc",e.isThumbnail&&"feed_post_content--itemImageThumbnail--LBdlC",t&&"feed_post_content--itemImagePadded--exY8B")}),e.isThumbnail?null:"image/gif"===e.mediaType?(0,o.jsx)("div",{className:F,children:(0,f.t)("fig_feed.gif")}):null]})}function $(e){let t=!!e.editPreviewOptions;return(0,o.jsx)("div",{className:"feed_post_content--zoomPanContainer--IGM49",children:e.contentItems.map((n,i)=>{let s;return e.editPreviewOptions?.applyToAllCallback&&(s=t=>e.editPreviewOptions.applyToAllCallback(t,X(n))),(0,o.jsx)("div",{className:d()({"feed_post_content--zoomPan--T-44S":!0,"feed_post_content--zoomPanSelected--2QOfW":i===e.selectedIdx}),children:(0,o.jsx)(T.DH,{applyToAllCallback:s,disableReset:!!e.editPreviewOptions?.disableReset,enableSnapToGuidelines:t,enableZoomControls:e.source===x.Zp.DETAIL_MODAL,enableZoomKeyControls:i===e.selectedIdx&&(e.source===x.Zp.DETAIL_MODAL||t),imageScale:t?1:void 0,imageSrc:n.image_url,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[X(n)],pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||n.backgroundColor&&(0,l.H0)(n.backgroundColor)||e.pageBackgroundColor&&(0,l.H0)(e.pageBackgroundColor)||void 0,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,setContentPreview:i===e.selectedIdx?e.editPreviewOptions?.setContentPreview:void 0,shouldWheelPan:!0,shouldZoomToStart:!1,showEditPreviewControls:t},`details::${n.image_url}`)},i)})})}function q(e){return(0,o.jsx)(P,{item:e.prototypeContent})}function J(e){let t=!!e.editPreviewOptions;return(0,o.jsx)(T.DH,{applyToAllCallback:e.editPreviewOptions?.applyToAllCallback?t=>e.editPreviewOptions.applyToAllCallback(t,X(e.imageContent)):void 0,disableReset:!!e.editPreviewOptions?.disableReset,enableSnapToGuidelines:t,enableZoomControls:e.source===x.Zp.DETAIL_MODAL,enableZoomKeyControls:e.source===x.Zp.DETAIL_MODAL||t,imageScale:1,imageSrc:e.imageContent.url,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[X(e.imageContent)],pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||e.imageContent.backgroundColor&&(0,l.H0)(e.imageContent.backgroundColor)||e.pageBackgroundColor&&(0,l.H0)(e.pageBackgroundColor)||void 0,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,setContentPreview:e.editPreviewOptions?.setContentPreview,shouldWheelPan:!0,shouldZoomToStart:!1,showEditPreviewControls:t},`details::${e.imageContent.url}`)}function ee(e){let t=B(e.feedPostUuid,e.videoContent.path,e.source);return(0,o.jsx)(H,{id:t,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,source:e.source})}function et(e){return e.isThumbnail?(0,o.jsx)("div",{children:(0,f.tx)("fig_feed.video")}):(0,o.jsx)("div",{children:(0,f.tx)("fig_feed.transcode_after_submit")})}function en(e){if(h.cU.includes(e.videoContent.mediaType)&&""===e.videoContent.videoFileUuid)return(0,o.jsx)(et,{isThumbnail:e.isThumbnail});if(e.isThumbnail&&e.videoContent.coverImage)return(0,o.jsx)(K,{imgUrl:e.videoContent.coverImage,isThumbnail:!0});let t=B(e.feedPostUuid,e.videoContent.path,e.source);return(0,o.jsx)(H,{id:t,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source})}function eo(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m.x,{isLoading:!e.content.imageUrl,children:()=>(0,o.jsx)(K,{imgUrl:e.content.imageUrl,isThumbnail:e.isThumbnail})}),!e.isThumbnail&&(0,o.jsx)("div",{className:F,children:(0,f.tx)("fig_feed.prototype_badge")})]})}function ei(e){let t=e.contentItems[e.selectedIdx];switch(t.type){case g.cM.NODE:return(0,o.jsx)($,{selectedIdx:e.selectedIdx,contentItems:e.contentItems,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor,source:e.source});case g.cM.IMAGE:return(0,o.jsx)(J,{imageContent:t,source:e.source,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor});case g.cM.VIDEO:return(0,o.jsx)(ee,{videoContent:t,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source});case g.cM.PROTOTYPE:return(0,o.jsx)(q,{prototypeContent:t});default:(0,s.xb)(t)}}function es(e){switch(e.content.type){case g.cM.NODE:let t=e.content,n=t.mediumImageUrl??t.preview_image_url??t.image_url,i=t.preview_image_url??t.image_url;return(0,o.jsx)(m.x,{isLoading:!!t.isLoading,children:()=>(0,o.jsx)(K,{imgUrl:e.isEditing?i:n,usesPreviewImage:!!t.preview_image_url,isThumbnail:e.isThumbnail,thumbnailUrl:e.isEditing?i:t.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage})});case g.cM.IMAGE:let a=e.content.mediumImageUrl??e.content.preview_image_url??e.content.url,d=e.content.preview_image_url??e.content.url;return(0,o.jsx)(K,{imgUrl:e.isEditing?d:a,isThumbnail:e.isThumbnail,usesPreviewImage:!!e.content.preview_image_url,mediaType:e.content.mediaType,thumbnailUrl:e.isEditing?d:e.content.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage});case g.cM.VIDEO:return(0,o.jsx)(en,{videoContent:e.content,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source});case g.cM.PROTOTYPE:return(0,o.jsx)(eo,{content:e.content,isThumbnail:e.isThumbnail});default:(0,s.xb)(e.content)}}function ea(e){let t=!!e.editPreviewOptions,n=e.contentItems.length>1||t,{selectedContentIdx:s,pageBackgroundColor:a,setSelectedContentIdx:r,contentItems:u,onContentHover:_}=e,[h,x]=(0,c.M)();i.useEffect(()=>{_?.(x)},[x,_]);let b=i.useMemo(()=>u[s],[u,s]),T=i.useMemo(()=>n?(0,o.jsx)(ed,{direction:"horizontal",contentItems:u,selectedIdx:s,setSelectedIdx:r,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:!1}):null,[n,u,s,r,e.pageBackgroundColor,e.feedPostUuid]);e.editPreviewOptions&&b&&"node"===b.type&&b.backgroundColor&&(e.editPreviewOptions.pageBackgroundColor=(0,l.H0)(b.backgroundColor)??void 0);let{openEditPreviewModalCallback:I,deleteSelectedItemCallback:w}=e,[P,j]=i.useState(!1),O=i.useMemo(()=>{if(!I&&!w||!P||!b)return null;let e=n?"feed_post_content--editPreviewOverlayWithThumbnails--pPLEV feed_post_content--editPreviewOverlay--GYr8Q":"feed_post_content--editPreviewOverlay--GYr8Q";return(0,o.jsxs)("div",{className:e,children:[b&&(0,g.aT)(b)&&I&&(0,o.jsx)("div",{children:(0,o.jsx)("button",{onClick:I,className:"feed_post_content--editPreviewButton--Z9MT5",children:(0,f.tx)("fig_feed.edit_preview")})}),w&&(0,o.jsx)(p.B,{svg:Q.A,className:"feed_post_content--deleteContentItemIcon--XF-w3",onClick:w,autosize:!0,"data-tooltip-type":v.Ib.TEXT,"data-tooltip":(0,f.t)("fig_feed.delete"),dataTestId:"delete-content-item"})]})},[P,b,n,I,w]);return(0,o.jsxs)("div",{className:d()("feed_post_content--contentSectionContainer--KsA0H",t&&"feed_post_content--showOverflow--LCCb8"),children:[(0,o.jsxs)("div",{ref:h,className:n&&!t?"feed_post_content--selectedContentWithThumbnails--OrAWq feed_post_content--selectedContent--pGcQE":"feed_post_content--selectedContent--pGcQE",style:{backgroundColor:(0,C.m)(b,e.pageBackgroundColor)},onMouseDown:e.onSelectedTileMouseDown,role:"button",tabIndex:0,onPointerEnter:()=>j(!0),onPointerLeave:()=>j(!1),"data-testid":"feed-post-content-section",children:[O,(0,o.jsx)(m.x,{isLoading:!b,children:()=>e.staticContent?(0,o.jsx)(es,{content:b,isThumbnail:!1,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source}):(0,o.jsx)(ei,{contentItems:u.filter(e=>null!==e),selectedIdx:s,editPreviewOptions:e.editPreviewOptions,feedPostUuid:e.feedPostUuid,pageBackgroundColor:a,source:e.source})})]}),T]})}function ed(e){let t=i.useRef(null);i.useEffect(()=>{let n=t.current,o=t.current?.children[e.selectedIdx];if(!n||!o)return;let i=n?.getBoundingClientRect();i?.top>=0&&i?.left>=0&&i?.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i?.right<=(window.innerWidth||document.documentElement.clientWidth)&&o.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[e.direction,e.selectedIdx]);let n=function(){let e=(0,O.fp)(k)[0];return i.useCallback(t=>{e&&e.ref?.current&&(t&&t!==e?.feedPostUuid||e.ref?.current.pause())},[e])}(),{scrollToItem:s,onReorderCallback:a,setSelectedIdx:l,deleteItem:c}=e,[u,m]=i.useState(null),f=e.thumbnailType||"wide",h=i.useCallback((t,i,a)=>{let r=d()(z,a&&"feed_post_content--selectedThumbnail--MdH-d","small"===f&&Z,"wide"===f&&Y);return(0,o.jsxs)("div",{className:r,onMouseDown:()=>{n(e.feedPostUuid),s?.(i),l?.(i)},onPointerEnter:()=>m(i),onPointerLeave:()=>m(null),role:"button",tabIndex:0,style:{backgroundColor:(0,C.m)(t,e.pageBackgroundColor)},"data-testid":`content-item-${i}`,children:[(0,o.jsx)(es,{content:t,isThumbnail:!0,isEditing:e.isEditing}),c&&i===u&&(0,o.jsx)("div",{className:"feed_post_content--thumbnailOverlay--feEzZ",children:(0,o.jsx)("div",{className:"feed_post_content--deleteIcon--ptC6G",onClick:e=>{e.stopPropagation(),c(i)},role:"button",tabIndex:0,children:(0,o.jsx)(b,{})})})]})},[e.pageBackgroundColor,e.feedPostUuid,f,e.isEditing,u,n,s,l,c]),g=t=>{if("horizontal"!==e.direction)return null;let n=e.selectedIdx===("left"===t?0:e.contentItems.length-1);return(0,o.jsx)(_.$,{onMouseDown:()=>{let n=(e.selectedIdx+("left"===t?-1:1)+e.contentItems.length)%e.contentItems.length;l?.(n)},icon:"left"===t?"chevron-left-32":"chevron-right-32",variant:"text",disabled:n})},v=d()("feed_post_content--contentThumbnailsSectionV2--dXne6","horizontal"===e.direction?"feed_post_content--contentThumbnailsSectionV2_horizontal--mE1uH":"feed_post_content--contentThumbnailsSectionV2_vertical--xycdu");if(a)return(0,o.jsx)("div",{className:v,children:(0,o.jsxs)(r._.Group,{axis:"vertical"===e.direction?"y":"x",onReorder:a,values:e.contentItems,className:d()(W,"horizontal"===e.direction?"feed_post_content--contentThumbnailsSectionInnerV2_horizontalReorder--icuQg":V),role:"button",tabIndex:0,ref:t,children:[e.contentItems.map((t,n)=>(0,o.jsx)(r._.Item,{value:t,id:X(t),translate:"no",children:h(t,n,!(e.canAddContent&&e.isAddingContent)&&n===e.selectedIdx)},X(t))),e.canAddContent&&(0,o.jsx)("div",{className:d()(z,"small"===e.thumbnailType&&Z,"wide"===e.thumbnailType&&Y,e.isAddingContent?"feed_post_content--addingActive--h51xM":"feed_post_content--plusIcon--QHfa6"),onMouseDown:e.setAddingActive,role:"button",tabIndex:0,children:(0,o.jsx)(p.B,{svg:G.A})})]})});{let n=d()(W,"horizontal"===e.direction?"feed_post_content--contentThumbnailsSectionInnerV2_horizontal--r0SNN":V);return(0,o.jsxs)("div",{className:v,children:[g("left"),(0,o.jsx)("div",{className:n,ref:t,children:e.contentItems.map((t,n)=>(0,o.jsx)(i.Fragment,{children:h(t,n,n===e.selectedIdx)},n))}),g("right")]})}}},201222:(e,t,n)=>{n.d(t,{K:()=>eb});var o=n(486106),i=n(7378),s=n(514228),a=n(465776),d=n(449184),r=n(612521),l=n(39751),c=n(63728),u=n(992467),m=n(288654),p=n(910117),f=n(445814),_=n(347284),h=n(714743),g=n(502364),v=n(573154),x=n(303541),C=n(590952),b=n(770088),T=n(929976),I=n(156213),w=n(504768),P=n(12220),j=n(881732),O=n(697795),y=n(845253),E=n(386952),S=n(372672),U=n(43951),N=n(772425),k=n(530837),M=n(129884),L=n(375499),A=n(102752),D=n(353099),R=n(903573);let H="feed_post_detail_modal_opened",B=(0,R.Op)({initial:"await_open_feed_post_detail_modal",states:[{id:"await_open_feed_post_detail_modal",transitions:[(0,R.nr)(H,"complete")]},{id:"complete",terminal:!0}]}),F=(0,R.rn)("open_feed_post_detail_modal",B);var W=n(420927),V=n(621515),z=n(641749),Z=n(940356),Y=n(268271),G=n(284399),Q=n(17223),X=n(637027),K=n(831799),$=n(450829),q=n(195407),J=n(809086);function ee(e){let t=i.useRef(null),[n,s]=i.useState({width:0,height:0});i.useLayoutEffect(()=>{if(t.current){let e=t.current.getBoundingClientRect();s({width:e.width,height:e.height})}},[s]);let a=e.width,d=e.backgroundColor,r="light"===e.background,l=(0,q.xT)(e.targetKey)||document.documentElement;if(!l)return null;let c=(0,o.jsx)("div",{children:e.ctaText&&e.onClickPrimaryCta&&(0,o.jsxs)("div",{className:J.ZA,children:[e.bottomLeftText&&(0,o.jsx)("b",{children:e.bottomLeftText}),(0,o.jsxs)("div",{className:J.OQ,children:[e.secondaryCtaText&&e.onClickSecondaryCta&&(0,o.jsx)(K.$z,{className:r?J.jS:J.dC,onClick:e.onClickSecondaryCta,"aria-hidden":!0,children:e.secondaryCtaText}),e.ctaText&&e.onClickPrimaryCta&&(0,o.jsx)(X.vd,{className:r?J.TI:J.ZO,onClick:e.onClickPrimaryCta,trackingProperties:e.buttonContext?{buttonContext:e.buttonContext}:void 0,children:e.ctaText})]})]})}),u=function(e,t,n,o,i){let s=i??0;switch(o){case $.LN.BOTTOM_LEFT:return{top:e.bottom-(n+s),left:e.left+s};case $.LN.BOTTOM_RIGHT:return{top:e.bottom-(n+s),left:e.right-(t+s)};case $.LN.TOP_RIGHT:return{top:e.top+s,left:e.right-(t+s)};case $.LN.CENTER:return{top:e.top+(e.height-n)/2,left:e.left+(e.width-t)/2};default:return{top:e.top+s,left:e.left+s}}}(l.getBoundingClientRect(),n.width,n.height,e.modalLocation,e.positionOffset);return(0,o.jsxs)("div",{className:r?J.IL:J.wV,ref:t,style:{backgroundColor:d,width:a,...u},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:e.title}),e.children,(0,o.jsx)(Q.Jn,{className:J._S,onClick:e.dismissModal,innerText:"close"})]}),c]})}var et=n(6204);let en="feed-post-detail-modal";function eo(){let e=(0,V.e)({overlay:et.bIZ,priority:Y.N.DEFAULT_MODAL}),t=(0,z.zl)(F),n=i.useMemo(()=>(0,x.tx)("rcs.feed_onboarding.zoom_pan.title"),[]),s=!!(0,Z.f)("has_seen_feed_post_details_zoom_pan_nudge");(0,i.useEffect)(()=>{!s&&t.completed&&e.show()},[e,s,t]);let a=(0,i.useMemo)(()=>(0,o.jsx)(W.S,{shortcut:"\u2318\xb1"}),[]),d=(0,i.useMemo)(()=>(0,o.jsx)(W.S,{shortcut:"Ctrl\xb1"}),[]);return(0,o.jsx)(G.h,{modalType:$.q3.SELF_CONTAINED,element:(0,i.useCallback)(e=>(0,o.jsx)(ee,{targetKey:en,dismissModal:e.dismissModal,title:n,ctaText:(0,x.t)("rcs.got_it"),onClickPrimaryCta:e.onClickPrimaryCta,width:268,modalLocation:$.LN.BOTTOM_LEFT,positionOffset:16,children:(0,o.jsx)("p",{children:(0,x.tx)("rcs.feed_onboarding.zoom_pan.content",{macKeyboardShortcut:a,windowsKeyboardShortcut:d})})}),[n,a,d]),trackingContextName:"Feed Post Details View Zoom Pan Nudge",isShowing:e.isShowing,onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete,userFlagOnShow:"has_seen_feed_post_details_zoom_pan_nudge"})}var ei=n(183814),es=n(841415),ea=n(918700),ed=n(462076),er=n(837002),el=n(201545),ec=n(575850),eu=n(486464),em=n(529503),ep=n(758553);let ef="feed_post_detail_modal--detailModal--MMYKj",e_="feed_post_detail_modal--headerSvg--9mFA0";var eh=n(889438),eg=n(628015),ev=n(744239),ex=n(821527);function eC(){return(0,o.jsx)("div",{children:(0,x.t)("fig_feed.post_dne")})}let eb=(0,A.Ju)(function(e){let t=(0,s.wA)(),n=(0,y.dq)(),u=(0,E._6)();i.useEffect(()=>{"teamFeed"!==u.view&&"user"!==u.view&&("fullscreen"===u.view&&e.inFileView||t(I.Ce()))},[t,u,e.inFileView]);let f=i.useRef({selectedView:u,inFileView:e.inFileView});i.useEffect(()=>{f.current={selectedView:u,inFileView:e.inFileView}},[e.inFileView,u]),i.useEffect(()=>()=>{f.current.inFileView||"teamFeed"!==f.current.selectedView.view||t(T.sf({...f.current.selectedView,postUuid:void 0}))},[t]);let _=i.useRef(!1),h=i.useCallback(t=>{_.current||!t||e.autofocusCommentInput||(t.focus(),_.current=!0)},[e.autofocusCommentInput]),C=(0,l.ZC)(e.postUuid);i.useEffect(()=>{n&&(e.inFileView||C===e.postUuid||"teamFeed"!==u.view||(_.current=!1,r.Ay.replace((0,ed.Kc)(n,{uuid:e.postUuid}))))},[C,e.postUuid,n,e.inFileView,u]);let b=(0,m.Rs)(U.FHz,{publicUuid:e.postUuid});i.useEffect(()=>{!e.inFileView&&b.data?.feedPost?.title&&(0,O.hL)(b.data.feedPost.title)},[e.inFileView,b.data]),i.useEffect(()=>((0,d.sx)("Team Feed Post Details View Visited",{postUuid:e.postUuid}),()=>{(0,d.sx)("Team Feed Post Closed",{postUuid:e.postUuid})}),[e.postUuid]),i.useEffect(()=>{p.Ay.post(`/api/feed_posts/${e.postUuid}/mark_viewed`)},[e.postUuid]);let[w,P]=i.useState(0);i.useEffect(()=>{P(e.selectedContentIdx||0)},[e.postUuid,e.selectedContentIdx]);let j=i.useMemo(()=>b.data?.feedPost?b.data.feedPost.content.map(e=>JSON.parse(e)):[],[b.data]),S=j.length,{requestToOpenPostByFeedIdx:N}=e,M=i.useCallback(t=>{t.keyCode===c.Uz.LEFT_ARROW?0===w?N&&void 0!==e.feedIdx&&N(e.feedIdx-1):P(w-1):t.keyCode===c.Uz.RIGHT_ARROW&&(w===S-1?N&&void 0!==e.feedIdx&&N(e.feedIdx+1):P(w+1))},[w,S,N,e.feedIdx]),[L,A]=i.useState(!0),R=i.useCallback(()=>A(e=>!e),[]),[B,F]=i.useState(!1);i.useEffect(()=>{!B&&"loaded"===b.status&&j[w]&&(0,k.Dr)(j[w])&&((0,g.YQ)({id:H}),F(!0))},[b.status,B,j,w]);let W=b.data?.feedPost||e.initialPreloadedPost;if(!W)switch(b.status){case"errors":return(0,o.jsx)(eC,{});case"loading":return(0,o.jsx)(ea.d_,{className:ef,size:"any"});case"loaded":return t(v.s.error((0,x.t)("fig_feed.post_dne"))),t(I.Ce()),null;default:(0,a.xb)(b)}return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ea.d_,{className:ef,size:"any",children:(0,o.jsx)("div",{className:"feed_post_detail_modal--layout--b28Tm",role:"listbox",tabIndex:0,onKeyDown:M,ref:h,children:(0,o.jsxs)("div",{className:"feed_post_detail_modal--container--PkjxH","data-onboarding-key":en,children:[(0,o.jsx)("div",{className:L?"feed_post_detail_modal--contentContainer--HvXHM":"feed_post_detail_modal--contentContainerFull--Y-lEo feed_post_detail_modal--contentContainer--HvXHM",children:(0,o.jsx)(er.x,{contentItems:j,staticContent:!1,selectedContentIdx:w,setSelectedContentIdx:t=>{P(t),e.onSetSelectedContentIdx?.(t)},pageBackgroundColor:W.backgroundColor??void 0,feedPostUuid:e.postUuid,source:ed.Zp.DETAIL_MODAL})}),(0,o.jsx)(eT,{feedPost:W,contentItems:j,autofocusCommentInput:!!e.autofocusCommentInput,inFileView:e.inFileView,onSidebarToggle:R,show:L})]})})}),(0,o.jsx)(D.p,{children:(0,o.jsx)(eo,{})})]})},j.E,A.ZU.YES);function eT(e){let t=(0,s.wA)(),n=(0,S.iZ)(),a=(0,y.dq)(),d=i.useCallback(()=>{t(I.Ce())},[t]),{fileData:r,fileIcon:l,fileLoaded:c,openFile:u}=(0,ed.rS)(e.feedPost.publicUuid,e.contentItems,e.feedPost.fileKey),m=(0,ed.DG)(e.feedPost.publicUuid,ed.dy.DETAIL);if(!a||!n)return null;let p=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"feed_post_detail_modal--headerContextMenu--0idb0",children:(0,o.jsx)(ep.Wu,{feedPost:e.feedPost,source:ed.Zp.DETAIL_MODAL})}),(0,o.jsx)("button",{onClick:m,"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,x.t)("fig_feed.copy_link_to_post"),children:(0,o.jsx)(h.B,{svg:ev.A,className:e_})}),(0,o.jsx)("button",{onClick:e.onSidebarToggle,children:(0,o.jsx)(h.B,{svg:eg.A,className:e_})}),(0,o.jsx)("button",{onClick:d,children:(0,o.jsx)(h.B,{svg:ex.A,className:"feed_post_detail_modal--closeX--NwlcU"})})]});if(!e.show)return(0,o.jsx)("div",{className:"feed_post_detail_modal--sidebarCollapsed--JYqsn feed_post_detail_modal--contentOverlayPill--1jsoj",children:p});let _=(0,o.jsxs)("div",{className:"feed_post_detail_modal--headerContainer--oByFt",children:[(0,o.jsx)("div",{className:"feed_post_detail_modal--headerTitle--SJpLy",children:(0,x.tx)("fig_feed.details")}),(0,o.jsx)("div",{className:"feed_post_detail_modal--headerRight--VNHRM","data-testid":"feed-modal-open-file",children:p})]}),g=(0,o.jsxs)("div",{className:"feed_post_detail_modal--infoContainer--r-tGh",children:[(0,o.jsx)("div",{className:"feed_post_detail_modal--topRow--Rs14r",children:(0,o.jsx)(ec.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,size:C.Pf.MEDIUM,shortDate:!1})}),(0,o.jsx)(ew,{feedPost:e.feedPost,currentOrgId:a,currentUser:n}),c&&!e.inFileView&&(0,o.jsx)("button",{className:"feed_post_detail_modal--fileInfo--IsxWn",onClick:e.inFileView?void 0:u,children:(0,x.tx)("fig_feed.from_file",{fileComponent:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"feed_post_detail_modal--detailsFileButtonIcon--wfORW",children:(0,o.jsx)(f.w4,{type:l,size:16})}),(0,o.jsx)("span",{className:"feed_post_detail_modal--detailsFileButtonName--kqizR",children:r.name})]})})}),(0,o.jsx)("div",{className:"feed_post_detail_modal--bottomRow--ycO1b",children:(0,o.jsx)(eu.Q$,{type:eu.Us.FULL,source:eu.zY.DETAIL_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions})})]});return(0,o.jsxs)("div",{className:"feed_post_detail_modal--rightSideContainer--n9eWy",children:[_,(0,o.jsx)(eI,{postInfo:g,comments:e.feedPost.comments,postUuid:e.feedPost.publicUuid,currentUser:n,currentOrgId:a,autofocusCommentInput:e.autofocusCommentInput})]})}function eI(e){let t=(0,s.wA)(),n=i.useRef(null),a=i.useRef(null),[d,r]=i.useState(!1),l=i.useCallback(t=>{0===t.intersectionRatio&&e.comments.length>0?r(!0):r(!1)},[e.comments.length]);(0,ei.g)(a,l,{threshold:[0,1]});let c=i.useCallback(()=>{n.current&&n.current.scrollToBottom()},[]),m=e.comments.sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime()),[p,f]=i.useState(e.comments.length);i.useEffect(()=>{let t=p<e.comments.length;t&&f(e.comments.length);let n=e.comments[e.comments.length-1];t&&n.user.id===e.currentUser.id&&c()},[p,e.comments,e.currentUser,c]);let[g,v]=i.useState([]),T=(0,s.d4)(e=>e.comments.newComment),I=i.useCallback(()=>{t(w.gX({postUuid:e.postUuid,messageMeta:g,attachmentIds:Object.keys(T.attachments)})),v([]),t(b.$M({resetStatusOnly:!1}))},[t,e.postUuid,g,T]),j=i.useMemo(()=>({library:new N.M8(e.currentOrgId,e.postUuid)}),[e.currentOrgId,e.postUuid]),O=i.useCallback(e=>{t(b.nb({attachmentId:e.id,attachment:e}))},[t]),y=i.useCallback((e,n)=>{t(b.nb({attachmentId:e,attachment:null})),n?n.then(()=>L.J.delete(e)):L.J.delete(e)},[t]);return(0,o.jsxs)("div",{className:"feed_post_detail_modal--commentSection--2SXbE",children:[(0,o.jsxs)(_.P,{innerClassName:"feed_post_detail_modal--commentSectionScroll--yFbDD",useBottomPinning:!0,ref:n,children:[e.postInfo,(0,o.jsx)("div",{ref:a,className:"feed_post_detail_modal--existingComments--1ORWZ",children:m.map(t=>(0,o.jsx)(el.i,{attachments:t.attachments,commentId:t.id,commentUser:t.user,commentUuid:t.uuid||"",createdAt:t.createdAt,currentOrgId:e.currentOrgId,mentionables:j,messageMeta:(0,P.o8)(t.messageMeta),reactions:t.reactions,user:e.currentUser},t.id))}),d&&(0,o.jsxs)("div",{className:"feed_post_detail_modal--commentsToast--nTd74",onClick:c,role:"button",tabIndex:0,children:[(0,o.jsx)(h.B,{svg:eh.A,className:"feed_post_detail_modal--arrowDown--XpvZj"}),(0,x.tx)("fig_feed.num_comments",{numComments:m.length})]})]}),(0,o.jsxs)("div",{className:"feed_post_detail_modal--composerContainer--bIZJV",children:[(0,o.jsx)("div",{className:"feed_post_detail_modal--composerAvatar--4cjv3",children:(0,o.jsx)(C.H8,{user:e.currentUser,size:C.Pf.MEDIUM})}),(0,o.jsx)(em.o,{attachments:Object.values(T.attachments),autofocus:e.autofocusCommentInput,composerContainerClass:"feed_post_detail_modal--composer--A7iTJ thread_comment_composer--inputSectionWrapper--Bxyab",currentOrgId:e.currentOrgId,deleteAttachment:y,editableTypeaheadClass:"feed_post_detail_modal--editableTypeahead--4ZMRF thread_comment_composer--editableTypeahead--9R6Yd text--fontPos13--xW8hS text--_fontBase--QdLsd",editingExistingComment:!1,errorFallback:u.H4.NONE,fallback:null,hideSubmitButton:!1,mentionables:j,messageContent:g,onSubmit:I,updateAttachment:O,updateMessage:v,user:e.currentUser})]})]})}function ew(e){let t=i.useMemo(()=>(0,P.o8)(e.feedPost.descriptionMeta),[e.feedPost.descriptionMeta]);return(0,o.jsxs)("div",{role:"textbox",tabIndex:0,className:"feed_post_detail_modal--postDescription--9xUac",children:[(0,o.jsx)("div",{className:"feed_post_detail_modal--postTitle--dZdnT feed_tile--postTitle--DY-Hh",children:e.feedPost.title}),(0,o.jsx)(es.HH,{messageMeta:t,commentId:e.feedPost.id,className:"feed_post_detail_modal--postDescriptionMessage--vHcLD comment_message--commentMessage--kZCzD"})]})}},201545:(e,t,n)=>{n.d(t,{i:()=>T});var o=n(486106),i=n(7378),s=n(514228),a=n(749682),d=n(992467),r=n(236327),l=n(303541),c=n(590952),u=n(770088),m=n(156213),p=n(504768),f=n(844092),_=n(841415),h=n(565019),g=n(903447),v=n(575850),x=n(486464),C=n(529503);let b=e=>`COMMENT_SIDEBAR_OVERFLOW_DROPDOWN-${e}`;function T(e){let t=(0,s.wA)(),[n,r]=(0,a.M)(),[l,m]=i.useState([]);i.useEffect(()=>{m(e.messageMeta)},[e.messageMeta]);let[h,g]=i.useState(!1),b=(0,s.d4)(e=>e.comments.editingComment),T=i.useCallback(n=>{t(u.uy({id:e.commentId,key:e.commentUuid,attachmentId:n.id,attachment:n}))},[t,e.commentId,e.commentUuid]),w=i.useCallback(n=>(t(u.uy({id:e.commentId,key:e.commentUuid,attachmentId:n,attachment:null})),Promise.resolve()),[e.commentId,e.commentUuid,t]),P=i.useCallback(()=>{t(p.cx({commentId:e.commentId,uuid:e.commentUuid,messageMeta:l,attachmentUpdates:b?.attachmentUpdates})),t(u.cL()),g(!1)},[t,b,e.commentId,e.commentUuid,l]),j=i.useCallback(()=>{let n={};e.attachments?.forEach(e=>{n[e.id]=e}),t(u.Df({id:e.commentId,key:e.commentUuid,messageMeta:e.messageMeta,attachmentUpdates:{deleted:[],attachments:n}})),g(!0)},[t,e.commentId,e.commentUuid,e.messageMeta,e.attachments]),O=i.useCallback(()=>{m(e.messageMeta),t(u.pD()),g(!1)},[t,e.messageMeta]),y=e.commentUser.id===e.user.id,E=e.commentId.startsWith(p.v6),S=e.reactions.length>0;return(0,o.jsxs)("div",{className:"feed_post_details_comments--comment--ScdJc",ref:n,children:[(0,o.jsx)("div",{className:"feed_post_details_comments--avatarColumn--13o7f",children:(0,o.jsx)(v.A,{user:e.commentUser,noHandle:!0,size:c.Pf.MEDIUM})}),(0,o.jsxs)("div",{className:"feed_post_details_comments--commentBody--tIA5q",children:[(0,o.jsxs)("div",{className:"feed_post_details_comments--commentHeader--vzA-X",children:[(0,o.jsx)(v.B,{user:e.commentUser,date:e.createdAt,noAvatar:!0,shortDate:!0}),!h&&y&&(0,o.jsx)(I,{commentId:e.commentId,commentUuid:e.commentUuid,user:e.user,onEdit:j,hideTarget:!r})]}),h?(0,o.jsx)("div",{className:"feed_post_details_comments--editComposerContainer--ePn76",children:(0,o.jsx)(C.o,{attachments:b?.attachmentUpdates?.attachments?Object.values(b?.attachmentUpdates?.attachments):[],autofocus:!0,composerContainerClass:"feed_post_details_comments--composer--5EDPO thread_comment_composer--inputSectionWrapper--Bxyab",currentOrgId:e.currentOrgId,deleteAttachment:w,editableTypeaheadClass:"feed_post_details_comments--editableTypeahead--kMhTQ thread_comment_composer--editableTypeahead--9R6Yd text--fontPos13--xW8hS text--_fontBase--QdLsd",editingExistingComment:!0,errorFallback:d.H4.NONE,fallback:d.H4.NONE,hideSubmitButton:!1,mentionables:e.mentionables,messageContent:l,onCancel:O,onSubmit:P,updateAttachment:T,updateMessage:m,user:e.user})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"feed_post_details_comments--commentRow--c2So7",children:[(0,o.jsx)(_.HH,{messageMeta:l,commentId:e.commentId,className:"feed_post_details_comments--commentMessage--lHCM2"}),!E&&!S&&(0,o.jsx)(x.nn,{type:x.Us.ADD_ONLY,source:x.zY.DETAIL_COMMENT_NO_REACTION,feedReactions:e.reactions,commentId:e.commentId,commentUuid:e.commentUuid,hideAddReactionButton:!r})]}),e.attachments&&(0,o.jsx)("div",{className:"feed_post_details_comments--attachmentsContainer--M-F-r",children:(0,o.jsx)(f.a,{attachments:e.attachments,canEdit:y,fileKey:""})}),S&&(0,o.jsx)(x.nn,{type:x.Us.FULL,source:x.zY.DETAIL_COMMENT_WITH_REACTION,feedReactions:e.reactions,commentId:e.commentId,commentUuid:e.commentUuid,hideAddReactionButton:!r})]})]})]})}function I(e){let t=(0,s.wA)(),n=i.useCallback(()=>{t((0,m.to)({type:h.E,data:{onConfirm:()=>{t(p.BC({commentId:e.commentId,uuid:e.commentUuid}))}},showModalsBeneath:!0}))},[t,e.commentId,e.commentUuid]),{onEdit:a}=e,d=i.useMemo(()=>[(0,o.jsx)(r.c$,{onClick:a,children:(0,l.tx)("comments.edit")},"edit"),(0,o.jsx)(r.c$,{onClick:n,children:(0,l.tx)("comments.delete_comment")},"delete")],[n,a]);return e.commentId.startsWith(p.v6)?null:(0,o.jsx)(g.V,{hideTarget:e.hideTarget,dropdownId:b(e.commentId),options:d,lean:"left"})}},575850:(e,t,n)=>{n.d(t,{A:()=>h,B:()=>_});var o=n(486106),i=n(7378),s=n(514228),a=n(536384),d=n.n(a),r=n(551536),l=n(986103),c=n(590952),u=n(929976),m=n(753501),p=n(895626);let f="feed_profile_header--profile--BBFn9";function _(e){let t=e.date&&(0,o.jsx)(l.h1,{date:e.date,style:e.shortDate?"short":void 0,capitalize:!0},"from-now"),n=[(0,o.jsx)("div",{onMouseDown:e.onTileMouseDown,role:"button",tabIndex:0,className:d()(e.onTileMouseDown&&"feed_profile_header--fromNowLinkContainer--wSTrC","feed_profile_header--fromNow--JI-v6"),children:t},"from-now")];return(0,o.jsx)("div",{className:f,children:(0,o.jsx)(h,{user:e.user,size:e.size,noAvatar:e.noAvatar,noHandle:e.noHandle,appendToHandle:n})})}function h(e){let t=(0,s.wA)(),n=i.useCallback(n=>{n.stopPropagation(),e.user.id&&t(u.sf({view:"user",userId:e.user.id,userViewTab:p.o.INTERNAL_PROFILE_POSTS}))},[t,e.user.id]),a=e.appendToHandle||!1===e.noHandle;return(0,o.jsxs)("div",{className:f,children:[!e.noAvatar&&(0,o.jsx)(r.N,{onClick:n,trusted:!0,onMouseDown:m.dG,children:(0,o.jsx)(c.H8,{user:e.user,size:e.size??c.Pf.LARGE})}),a&&(0,o.jsxs)("div",{className:"feed_profile_header--content--bTCE2",children:[!e.noHandle&&(0,o.jsx)(r.N,{className:"feed_profile_header--handleLink--GjGl1",onClick:n,trusted:!0,children:(0,o.jsx)("div",{className:"feed_profile_header--handle--CKDhH feed_profile_header--boldLinkText--MqQBP",children:e.user.handle})}),e.appendToHandle]})]})}},529503:(e,t,n)=>{n.d(t,{o:()=>o});let o=(0,n(992467).kf)("lazy_feed_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(4694),n.e(6976),n.e(3700),n.e(1083),n.e(8410)]).then(n.bind(n,364326))).FeedPostCommentComposer})})}}]);

//# debugId=29a91245-2eed-5878-8a89-56ff47df5e66

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/6a75c25aae3c02af9654530d66bdee05ae059e95/6503-a109dda9612567ec.min.js.map